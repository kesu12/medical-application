ALTER TABLE users
    ADD user_id BIGINT GENERATED BY DEFAULT AS IDENTITY;

ALTER TABLE users
    ADD CONSTRAINT uc_users_email UNIQUE (email);

ALTER TABLE users
    ADD CONSTRAINT uc_users_username UNIQUE (username);

ALTER TABLE users
    ADD CONSTRAINT FK_USERS_ON_USER FOREIGN KEY (id) REFERENCES departments (id);

ALTER TABLE users
    DROP COLUMN id;

DROP SEQUENCE refresk_tokens_id_seq CASCADE;

ALTER TABLE users
    ALTER COLUMN first_name DROP NOT NULL;

ALTER TABLE users
    ALTER COLUMN last_name DROP NOT NULL;

ALTER TABLE users
    ALTER COLUMN middle_name DROP NOT NULL;

ALTER TABLE users
    ALTER COLUMN role SET NOT NULL;

ALTER TABLE users
    ADD CONSTRAINT pk_users PRIMARY KEY (id);